Week 1
===================


----------


操作系统
-------------

操作系统做什么

> - 创建进程， 将可执行文件映射到进程里，穿件上下文环境， 跳转到该程序
> - 每一次第一条指令一定会伴随缺页异常
>	- 这时候系统分配一页内存，将程序从磁盘读入内存

假设一个程序在标准输出中输出一个字符

>- OS找到找到用来输出的程序
>- 控制设备的进程告诉窗口管理器， 窗口管理器判断这个指令是否合法
>- 图形处理

操作系统简单的流程可以描述为
> 用户程序 （透过OS功能调用）------ OS进程管理  ---- （返回） 用户程序

或者从OS进程管理出发
> OS进程管理 ---- （调度） ----- 用户程序 ---- （陷入）-----OS 

操作系统的定义和作用
>- 他是一个系统模块的集合
>- 能**有效,合理**的管理软硬件资源
>- 管理计算机工作流程
>- 提供服务
>- 使用户能够灵活，方便的使用计算机

我们注意这里边的关键字
>- **有效**
>    - OS要注意效率和利用率
>    - 要考虑CPU的利用率， I/O设备是否空闲 等
>- **合理**
>    - 各种资源管理是否公平合理
>- **方便使用**
>    - 用户接口和编程接口


OS的作用

>1. OS 是资源的管理者，这里资源包括了软件资源和硬件资源
	- 怎么管理？
		- 跟踪记录资源使用情况（数据结构）
		- 确定资源分配策略算法
			- 静态分配（在进程创建之前分配，可能会导致资源的浪费）
			- 动态分配 （可以提高资源利用率）
		- 资源的分配，回收
		- 提高利用率
		- 保护
		- 协调多个进程对资源的请求
	- 五大基本功能
		- 进程
		- 存储
		- 文件
		- 设备
		- interface
2. 提供服务
3. 对硬件进行扩展
	- OS是硬件之上第一层软件。 打个比方，硬件就是一个破床板，全是木头刺儿，坑坑洼洼。OS就是个床垫，不管什么样的床板，都能让你在上边舒服睡觉。
>	- OS这里创建了一个等价的扩展机器（虚拟）

OS的特征
> 1. 并发（Concurrency） -- 处理多个同时性的活动
	- 在单个CPU上看
		- 宏观 : 所有程序同时运行
		- 围观 : 不是这个情况
	- 并行(parallel) 是不同程序在**多个硬件**上同时运行
		- 举个例子， 并发是马拉松比赛， 并行是100米短跑。都是一起跑步（多个程序同时运行），但是马拉松选手公用一个跑到然而100米选手一人一个跑道。
2. 共享(Sharing) --  OS与用户程序共同使用资源， 在同一段时间内交替使用
		- 互斥共享 ： 比如打印机
		- 同时共享 ：比如此番文件
		- 主要就是最优化问题
3. 虚拟（Virtual）--  一个物理实体行摄多个逻辑实体
	- 例子
		- CPU ： 每个进程都认为自己有个CPU， 如果不虚拟这不现实
		- 寄存器 : 编译器课上会讲的很清楚
		- 显示设备，虚拟终端
		- 等
4. 随机 -- OS必须对不可预测的事件进行相应和处理
	- 例子
		- 进程运行速度
>		- 难以重现某时刻OS的状态

典型的OS构架

> WINDOWS
>| | |
|-|-|
|各种用户态的模块|
|DLL库|
|*#物理层#*|
|系统服务分发器|
|内核可调用接口|
|执行体|
|内核， 驱动|
|HAL（Hardware Abstraction Layer）|


OS 的分类
> 1. 批处理
> - 流程
		- OS操作员收集作业
			- 作业包括
				- 用户程序
				- 数据
				- 作业说明书（相当于一个脚本）
		- 将输入传给系统
		- 开始处理
		- 依次执行
		- 	操作员手机结果， 反馈给客户
	- 问题
		- 在输出输入的时候CPU空闲
	- 解决方案
		- 卫星机
		- SPOOLING（Simultaneous Peripheral Operation Online）,也叫假脱机
			- 思想 ： 利用磁盘作为缓冲， 将输入，计算，输出分别组织成任务流，使I/O和计算能够同时进行
			- 输入输出井。google一下看图
			- 现代计算机仍采用了spooling技术， WOW
2. 分时处理系统
	- 一个主机带着一堆没有运算能力的终端
	- 为了**及时响应**， 引入了`时间片`这个概念
		- 时间片 ： 以时间为单位， 为每个终端服务
	- 通用OS -- 一个批处理和分时处理的结合体
		- 前台 ：分时
		- 后台 ：批处理
3. 实时系统
	- 及时响应**外部事件** (的请求)， 对外部要求需要在极为严格的时间范围内应答， 对可靠性要求高
	- 硬实时（必须完成）
		- 车
	- 软实时 （接受偶尔违反最终时限要求）
		- 媒体播放时的掉帧
4. 个人计算机系统
5. 网络系统
6. 分布式系统
	- 或以网络， 或以多CPU， 允许若干计算机相互合作，完成**同一**任务
7. 嵌入式
	- 冰箱彩电洗衣机

